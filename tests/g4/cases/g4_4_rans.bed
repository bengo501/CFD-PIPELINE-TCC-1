// G4-4: RANS com alvo de y+
// Objetivo: Checar coerência entre regime turbulento, parede e malha

bed {
    diameter = 0.05 m;
    height = 0.1 m;
    wall_thickness = 0.002 m;
    clearance = 0.01 m;
    material = "steel";
}

lids {
    top_type = "flat";
    bottom_type = "flat";
    top_thickness = 0.003 m;
    bottom_thickness = 0.003 m;
}

particles {
    kind = "sphere";
    diameter = 0.005 m;
    count = 100;
    density = 2500.0 kg/m3;
    restitution = 0.3;
    friction = 0.5;
    seed = 42;
}

packing {
    method = "rigid_body";
    gravity = -9.81 m/s2;
    substeps = 10;
    max_time = 5.0 s;
}

export {
    formats = ["blend", "stl"];
    units = "m";
}

cfd {
    regime = "turbulent_rans";   // Regime turbulento RANS
    turbulence_model = "kOmegaSST";
    inlet_velocity = 0.1 m/s;
    fluid_density = 1000.0 kg/m3;
    fluid_viscosity = 0.001 Pa.s;
    yplus_target = 30;            // Próximo de 1 ou 30
    cells_per_dp = 10;            // Aumentado
    mesh_levels = {
        walls = 3;                // Reforçar perto de paredes
        particles = 2;            // Reforçar perto de partículas
    };
    max_iterations = 2000;
    convergence_criteria = 1e-6;
}

